{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://careerforge.thronoschain.org/schemas/profile.v1.json",
  "title": "CareerForgeProfileV1",
  "type": "object",
  "required": ["profile_version", "identity", "headline", "skills", "experience"],
  "properties": {
    "profile_version": { "type": "integer", "minimum": 1 },
    "identity": {
      "type": "object",
      "required": ["full_name"],
      "properties": {
        "full_name": { "type": "string", "minLength": 2 },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "location": { "type": "string" },
        "links": {
          "type": "object",
          "properties": {
            "linkedin": { "type": "string" },
            "github": { "type": "string" },
            "portfolio": { "type": "string" }
          }
        }
      }
    },
    "headline": { "type": "string", "minLength": 10 },
    "target": {
      "type": "object",
      "properties": {
        "roles": { "type": "array", "items": { "type": "string" }, "minItems": 1 },
        "seniority": {
          "type": "string",
          "enum": ["junior", "mid", "senior", "lead", "staff", "principal"]
        },
        "industries": { "type": "array", "items": { "type": "string" } },
        "locations": { "type": "array", "items": { "type": "string" } },
        "remote_ok": { "type": "boolean" }
      }
    },
    "summary_facts": {
      "description": "Facts the model can safely use (no invention).",
      "type": "array",
      "items": { "type": "string" }
    },
    "skills": {
      "type": "object",
      "required": ["hard"],
      "properties": {
        "hard": { "type": "array", "items": { "type": "string" }, "minItems": 1 },
        "soft": { "type": "array", "items": { "type": "string" } },
        "languages": { "type": "array", "items": { "type": "string" } },
        "certifications": { "type": "array", "items": { "type": "string" } }
      }
    },
    "experience": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["company", "title", "start_date", "highlights"],
        "properties": {
          "company": { "type": "string" },
          "title": { "type": "string" },
          "start_date": { "type": "string", "description": "YYYY-MM" },
          "end_date": { "type": "string", "description": "YYYY-MM or null for current" },
          "stack": { "type": "array", "items": { "type": "string" } },
          "highlights": {
            "description": "Bullets with impact + evidence references.",
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["text"],
              "properties": {
                "text": { "type": "string" },
                "metric": {
                  "type": "object",
                  "properties": {
                    "value": { "type": "number" },
                    "unit": { "type": "string" },
                    "confidence": {
                      "type": "string",
                      "enum": ["exact", "estimated", "unknown"]
                    }
                  }
                },
                "evidence": {
                  "description": "Proof links or references (off-chain).",
                  "type": "array",
                  "items": { "type": "string" }
                }
              }
            }
          }
        }
      }
    },
    "education": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "institution": { "type": "string" },
          "degree": { "type": "string" },
          "field": { "type": "string" },
          "year": { "type": "integer" }
        }
      }
    },
    "preferences": {
      "type": "object",
      "properties": {
        "tone": { "type": "string", "enum": ["direct", "balanced", "formal"] },
        "cv_length": { "type": "string", "enum": ["1_page", "2_pages"] },
        "no_invention": { "type": "boolean", "default": true }
      }
    }
  }
}
